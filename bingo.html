<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <script>

        const FILAS = 3;
        const COLUMNAS = 5;
        var lista_numeros;

        window.onload = generarCarton;


        function pintarCarton() {
            var tabla = document.getElementById("carton");
            var fila_nueva;
            var celda_nueva;

            for (var fila = 0; fila < FILAS; fila++) {
                fila_nueva = document.createElement("tr");
                for (var columna = 0; columna < COLUMNAS; columna++) {
                    celda_nueva = document.createElement("td");
                    fila_nueva.appendChild(celda_nueva);

                }
                tabla.appendChild(fila_nueva);
            }
        }

        /**
         * FUNCIÓN que recibe un número y comprueba si está ya en el cartón
         * devovlemos true si sí, false, si no.
         * */
        function isRepetido (numero_aleatorio)
        {
            var repetido = false;
                //TODO chequear si el numero_aletatorio está ya
                /*if (lista_numeros.includes(numero_aleatorio))
                {//el número ya estaba en la lista
                    repetido = true;
                } else {//el número NO estaba en la lista
                    repetido = false;
                }*/
                repetido = lista_numeros.includes(numero_aleatorio);   

            return repetido;

        }

        function crearListaNumeroAleatorioSinRepetir ()
        {   var num_aleatorio;
            var n_generados_valido=0;
            var dimension = FILAS *  COLUMNAS;

            do {
                num_aleatorio = genererarNumeroAleatorio(0, 90);
                if (!isRepetido(num_aleatorio)) {
                    console.log("No está, bien ");
                    lista_numeros.push(num_aleatorio);
                    n_generados_valido++;
                } else {
                    console.log("REPETIDO " + num_aleatorio);
                }
            } while (n_generados_valido < dimension);

        }
        function mostrarListaEnCarton ()
        {
            var lista_tds = document.querySelectorAll("td");
            var dimension = FILAS * COLUMNAS;
            var td_actual;

            for (var i = 0; i < (dimension); i++) {
                    td_actual = lista_tds[i]; 
                    td_actual.innerHTML = lista_numeros[i];
                }
        }
            function rellenarCarton() {
               
                lista_numeros = new Array();//con esto me creo la lista vacía
               
                crearListaNumeroAleatorioSinRepetir();
                lista_numeros.sort(comparaNumeros);
                mostrarListaEnCarton();
                
            }

            function comparaNumeros (n1, n2)
            {
                var valor_devuelto;

                    valor_devuelto = n1-n2;

                    /*if (n1>n2) 
                        {valor_devuelto = 1;} 
                        else if (n1<n2) 
                            {valor_devuelto= -1} 
                            else {valor_devuelto = 0;}*/

                return valor_devuelto
            }

            function generarCarton() {
                pintarCarton();//dibujo la tabla, el cartón, la estructura
                rellenarCarton();//relleno con núms. aleatorios
            }


            function genererarNumeroAleatorio(lim_inferior, lim_superior) {
                var num_aleatorio = 0;

                var n1 = Math.random();//entro 0 y 1
                num_aleatorio = (n1 * (lim_superior - lim_inferior + 1)) + lim_inferior
                num_aleatorio = Math.ceil(num_aleatorio);//redondeo

                return num_aleatorio;
            }


    </script>
</head>
<body>
    <table id="carton">
    </table>
</body>

</html>