<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Bingo</title>

    <script>
      const FILAS = 3;
      const COLUMNAS = 5;
      var lista_numeros;

      window.onload = generarCarton;

      function pintarCarton() {
        var tabla = document.getElementById("carton");
        var fila_nueva;
        var celda_nueva;

        for (var fila = 0; fila < FILAS; fila++) {
          fila_nueva = document.createElement("tr");
          for (var columna = 0; columna < COLUMNAS; columna++) {
            celda_nueva = document.createElement("td");
            fila_nueva.appendChild(celda_nueva);
          }
          tabla.appendChild(fila_nueva);
        }
      }

      /**
       * FUNCIÓN que recibe un número y comprueba si está ya en el cartón
       * devovlemos true si sí, false, si no.
       * */
      function isRepetido(numero_aleatorio) {
        var repetido = false;
        //TODO chequear si el numero_aletatorio está ya
        /*if (lista_numeros.includes(numero_aleatorio))
                {//el número ya estaba en la lista
                    repetido = true;
                } else {//el número NO estaba en la lista
                    repetido = false;
                }*/
        repetido = lista_numeros.includes(numero_aleatorio);

        return repetido;
      }

      function crearListaNumeroAleatorioSinRepetir() {
        var num_aleatorio;
        var n_generados_valido = 0;
        var dimension = FILAS * COLUMNAS;

        do {
          num_aleatorio = genererarNumeroAleatorio(0, 90);
          if (!isRepetido(num_aleatorio)) {
            console.log("No está, bien ");
            lista_numeros.push(num_aleatorio);
            n_generados_valido++;
          } else {
            console.log("REPETIDO " + num_aleatorio);
          }
        } while (n_generados_valido < dimension);
      }
      function mostrarListaEnCarton() {
        var lista_tds = document.querySelectorAll("td");
        var dimension = FILAS * COLUMNAS;
        var td_actual;

        for (var i = 0; i < dimension; i++) {
          td_actual = lista_tds[i];
          td_actual.innerHTML = lista_numeros[i];
        }
      }
      function rellenarCarton() {
        lista_numeros = new Array(); //con esto me creo la lista vacía

        crearListaNumeroAleatorioSinRepetir();
        lista_numeros.sort(comparaNumeros);
        mostrarListaEnCarton();
      }

      function comparaNumeros(n1, n2) {
        var valor_devuelto;

        valor_devuelto = n1 - n2;

        /*if (n1>n2) {valor_devuelto = 1;} else if (n1<n2) {valor_devuelto= -1}  else {valor_devuelto = 0;}*/

        return valor_devuelto;
      }

      function generarCarton() {
        pintarCarton(); //dibujo la tabla, el cartón, la estructura
        rellenarCarton(); //relleno con núms. aleatorios
      }

      function genererarNumeroAleatorio(lim_inferior, lim_superior) {
        var num_aleatorio = 0;

        var n1 = Math.random(); //entro 0 y 1
        num_aleatorio = n1 * (lim_superior - lim_inferior + 1) + lim_inferior;
        num_aleatorio = Math.ceil(num_aleatorio); //redondeo

        return num_aleatorio;
      }

      let nv_aleatorio = [0, 90];
      var i;
      for (let i = 0; i < nv_aleatorio.length; i++) {
        num_aleatorio = nv_aleatorio[i];
      }
    </script>
  </head>
  <style>
    table,
    th,
    td {
      background-color: #f1f1c1;
      border: 2px solid black;
    }
    div {
      display: flex;
      justify-content: center;
      padding-top: 50px;
    }
    th,
    td {
      padding: 40px;
      border-radius: 50%;
    }
    .tn {
      background-color: #ddd;
      border: none;
      color: black;
      margin: 4px 2px;
      transition: 0.3s;
    }
    .tn,
    td:hover {
      background-color: #3e8e41;
      color: rgb(6, 0, 0);
    }
  </style>
  <body>
    <div id="imagen">
      <table id="carton" class="tn">
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </table>
    </div>
  </body>
</html>